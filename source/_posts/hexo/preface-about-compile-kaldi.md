title: Compile Kalid in Visual Studio 2013  之序言
categories: Hexo
tags: [windows phone, win32, ASR]
---


###写作缘由

近来，因项目需要，我们在产品中使用了`Kaldi`。为了保持整个项目开发平台的统一，我们先后把kalid编译成了Linux，IOS, Android 三个版本，原本以为这样已经能够满足了项目需求，谁知在七月初，项目又添加了新的需求：需要把现在产品移植到Windows和Windows Phone上。于是乎，作为有过一点IOS开发经验的我，非常“荣幸”的担负起向WP8平台移植的任务。

在整个过程当中，深感这方面的编译资料之少。即使有，也已经过时了，而且网上的资料大部分是针对Linux平台的，显然，这与我们的需求是不符的。整个编译过程一直持续到现在，期间改过kaldi的代码，也改过clapack的代码，总之，整个编译的过程精细而又杂乱。

考虑到现在网上的情况，决定针对编译Kaldi写一个系列，希望对有这方面需求的人能有所帮助。

###个人约定

考虑到整个编译和配置过程非常的乱，特作此约定：

- 整个系列如非必要，不会插上图片
- 因为编译环境配置的差异，故不能保证我的配置对您都有效
- 对于一些资料来源，本人会尽量添加链接，否则，请大家自行google之


###总体过程

切身感触，编译Kaldi，最困难地方不在于Kaldi代码本身，而在于Kaldi所依赖的第三方库，如多线程库，数学库`BLAS`和`OpenFst`，对于Windows桌面系统，即`win32`平台，这些库大多都能找到对应的`win32`版本（`ATLAS`我不确定），所以总体上，编译难度还是挺低的。

但是，对于windows phone平台来说，这就是一个令人头痛的事情了。一言以蔽之，**只要你解决了`kaldi`的依赖库，你就成功了一大半！**


###困难之处

对于windwos桌面系统，我觉得最大的困难就是编译出对应的数学库（如`ATLAS`），不过可喜的是，已经有一个BLAS的衍伸版本OpenBlas在其官网提供了x86/x86_64版本（注：这个库我们在后面的系列中会提到的），所以，总体上编译出x86/x86_64版本的kaldi库难度还是能让人接受的。

对于Windows phone平台，最苦难的地方是有些依赖库根本没有ARM平台的版本，这就是令人恼火的一件事，特别是那个数学库BLAS，因其是用fortran写的，导致其衍生版本多需要交叉编译的方式产生库，考虑到Visual Studio这种IDE，想想还是算了吧！


###本系列写作计划

本系列主要会围绕着：

- 怎样解决kaldi依赖的多线程问题

- 怎样解决kaldi依赖的数学库BLAS问题

- 怎样解决kaldi依赖的openfst问题

其中，数学库BLAS又涉及到：`OpenBLAS`，`ATLAS`，`clapack`


###结束语

我会尽量阐述整个编译过程，然，碍于个人语言驾驭能力以及知识范围，如有错误的地方，欢迎指正！
